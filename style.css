:root{
  --bg:#f6f8fb; --card:#fff; --accent:#4f46e5; --muted:#6b7280; --danger:#ef4444;
  --store:#ffd7a3; --path:#e6f4ff; --esc:#d1fae5; --wash:#eef2ff; --exit:#fecaca;
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,Segoe UI,Arial;background:var(--bg);color:#111}
.topbar{display:flex;justify-content:space-between;align-items:center;padding:12px 18px;background:#fff;border-bottom:1px solid #eef2f6}
.brand{font-weight:800;color:var(--accent)}
.top-controls{display:flex;align-items:center;gap:10px}
.lang .lang-btn{margin-left:6px;padding:6px 8px;border-radius:6px;border:1px solid #e5e7eb;background:white;cursor:pointer}

/* layout */
.layout{display:grid;grid-template-columns:300px 1fr 320px;gap:16px;padding:16px}
.card{background:var(--card);padding:12px;border-radius:12px;box-shadow:0 6px 18px rgba(15,23,42,0.04)}
.left-col .card{margin-bottom:12px}

.floor-grid{display:flex;flex-wrap:wrap;gap:8px}
.floor-grid button{padding:8px 10px;border-radius:8px;border:0;background:#eef2ff;color:var(--accent);cursor:pointer}

.search-results{max-height:150px;overflow:auto;margin-top:8px}

.center-col{display:flex;flex-direction:column;gap:12px}
.map-header{display:flex;justify-content:space-between;align-items:center}
.map-grid{background:linear-gradient(180deg,#ffffff,#fbfdff);border-radius:12px;padding:12px;min-height:560px;display:grid;grid-template-columns:repeat(12,1fr);grid-auto-rows:56px;gap:6px;position:relative}

/* cell styles */
.cell{border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:12px;padding:4px;position:relative}
.cell.empty{background:transparent;border:1px dashed rgba(15,23,42,0.03)}
.cell.store{background:linear-gradient(135deg,var(--store),#fff3e0);border:1px solid #ffd7a3;color:#7c2d12;cursor:pointer}
.cell.path{background:linear-gradient(90deg,var(--path),#eaf6ff);border:1px dashed #8bbef6}
.cell.escalator{background:linear-gradient(90deg,var(--esc),#ecfeef);border:1px solid #8ef0d9}
.cell.wash{background:linear-gradient(90deg,var(--wash),#f0faff);border:1px solid #a7e3ff}
.cell.exit{background:linear-gradient(90deg,var(--exit),#fff1f2);border:1px solid #fca5a5;color:#7f1d1d}

/* legend & footer */
.legend{display:flex;gap:10px;align-items:center;padding:8px;margin-top:8px}
.legend-item{padding:6px 8px;border-radius:8px;background:#fff;border:1px solid #eee}

/* right col */
.right-col .card{margin-bottom:12px}

/* modal */
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,6,23,0.45);z-index:1200}
.modal.hidden{display:none}
.modal-card{background:var(--card);padding:18px;border-radius:12px;max-width:520px;width:92%;position:relative}
.modal-card .close{position:absolute;right:12px;top:12px;border:none;background:transparent;font-size:18px;cursor:pointer}

/* person element */
.person{position:fixed;left:0;top:0;transform:translate(-50%,-50%);font-size:24px;z-index:1000;transition:all 300ms linear}
.person.hidden{display:none}

/* buttons */
.btn-primary{background:var(--accent);color:#fff;border-radius:8px;padding:8px 12px;border:0;cursor:pointer}
.btn-secondary{background:#6b7280;color:#fff;border-radius:8px;padding:8px 12px;border:0;cursor:pointer}
.btn-green{background:#10b981;color:#fff;border-radius:8px;padding:8px 12px;border:0;cursor:pointer}
.danger{background:var(--danger);color:#fff;padding:10px;border-radius:8px;border:0;cursor:pointer}

/* small UI */
.checkout-row{display:flex;justify-content:space-between;align-items:center;margin-top:8px}
.emergency-row{display:flex;align-items:center;gap:8px}

/* animation */
@keyframes pulse {
  0%{box-shadow:0 0 0 rgba(79,70,229,0.3)}
  70%{box-shadow:0 0 18px rgba(79,70,229,0.08)}
  100%{box-shadow:0 0 0 rgba(79,70,229,0)}
}
.cell.active{animation:pulse 1.2s infinite}

/* mobile */
@media (max-width:1000px){
  .layout{grid-template-columns:1fr;grid-auto-rows:auto;padding:8px}
  .left-col, .right-col{order:2}
  .center-col{order:1}
  .map-grid{min-height:420px}
}
